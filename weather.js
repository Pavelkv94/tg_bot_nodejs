// {
//     now: {
//       phenomena: 'Ğ¡Ğ¿Ğ»Ğ¾ÑˆĞ½Ğ°Ñ Ğ¾Ğ±Ğ»Ğ°Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ',
//       falloutIcon: 'A10',
//       pressureTitle: '757 Ğ¼Ğ¼ Ñ€Ñ‚. ÑÑ‚.',
//       temperature: '+9',
//       windDirection: 'S',
//       wind: {
//         direction: [Object],
//         speed: [Array],
//         gustsSpeed: 0,
//         unstable: false
//       }
//     },
//     forecast: {
//       '2021-09-24': {
//         nightTemperature: [Object],
//         dayTemperature: [Object],
//         phenomena: 'ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¾Ğ±Ğ»Ğ°Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ, Ğ½ĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ´Ğ¾Ğ¶Ğ´ÑŒ',
//         falloutIcon: 'D6',
//         weekend: '',
//         pressureTitle: '746 Ğ¼Ğ¼ Ñ€Ñ‚. ÑÑ‚.',
//         humidityTitle: '90%',
//         dateTextDayOfWeek: 'Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°',
//         dayOfMonth: '24',
//         windDirection: 'W',
//         wind: [Object]
//       },
//       '2021-09-25': {
//         nightTemperature: [Object],
//         dayTemperature: [Object],
//         phenomena: 'ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¾Ğ±Ğ»Ğ°Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ, Ğ½ĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ´Ğ¾Ğ¶Ğ´ÑŒ',
//         falloutIcon: 'D6',
//         weekend: 'weekend',
//         pressureTitle: '755 Ğ¼Ğ¼ Ñ€Ñ‚. ÑÑ‚.',
//         humidityTitle: '90%',
//         dateTextDayOfWeek: 'ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ğ°',
//         dayOfMonth: '25',
//         windDirection: 'W',
//         wind: [Object]
//       },
//       '2021-09-26': {
//         nightTemperature: [Object],
//         dayTemperature: [Object],
//         phenomena: 'ĞœĞ°Ğ»Ğ¾Ğ¾Ğ±Ğ»Ğ°Ñ‡Ğ½Ğ¾, Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶ĞµĞ½ Ğ´Ğ¾Ğ¶Ğ´ÑŒ',
//         falloutIcon: 'D4',
//         weekend: 'weekend',
//         pressureTitle: '766 Ğ¼Ğ¼ Ñ€Ñ‚. ÑÑ‚.',
//         humidityTitle: '60%',
//         dateTextDayOfWeek: 'Ğ²Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ',
//         dayOfMonth: '26',
//         windDirection: 'NW',
//         wind: [Object]
//       },
//       '2021-09-27': {
//         nightTemperature: [Object],
//         dayTemperature: [Object],
//         phenomena: 'ĞœĞ°Ğ»Ğ¾Ğ¾Ğ±Ğ»Ğ°Ñ‡Ğ½Ğ¾, Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶ĞµĞ½ Ğ´Ğ¾Ğ¶Ğ´ÑŒ',
//         falloutIcon: 'D4',
//         weekend: '',
//         pressureTitle: '770 Ğ¼Ğ¼ Ñ€Ñ‚. ÑÑ‚.',
//         humidityTitle: '60%',
//         dateTextDayOfWeek: 'Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº',
//         dayOfMonth: '27',
//         windDirection: 'NE',
//         wind: [Object]
//       },
//       '2021-09-28': {
//         nightTemperature: [Object],
//         dayTemperature: [Object],
//         phenomena: 'ĞœĞ°Ğ»Ğ¾Ğ¾Ğ±Ğ»Ğ°Ñ‡Ğ½Ğ¾, Ğ½ĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ´Ğ¾Ğ¶Ğ´ÑŒ',
//         falloutIcon: 'D4',
//         weekend: '',
//         pressureTitle: '774 Ğ¼Ğ¼ Ñ€Ñ‚. ÑÑ‚.',
//         humidityTitle: '65%',
//         dateTextDayOfWeek: 'Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº',
//         dayOfMonth: '28',
//         windDirection: 'E',
//         wind: [Object]
//       }
//     },
//     today: {
//       date: '23 ÑĞµĞ½Ñ‚ÑĞ±Ñ€Ñ',
//       day: {
//         phenomena: 'Ğ¯ÑĞ½Ğ¾, Ğ´Ñ‹Ğ¼ĞºĞ°',
//         falloutIcon: 'B1',
//         temperature: '+6',
//         rusDateTime: 'Ğ´Ğ½ĞµĞ¼'
//       },
//       evening: {
//         phenomena: 'Ğ¯ÑĞ½Ğ¾',
//         falloutIcon: 'A2',
//         temperature: '+6',
//         rusDateTime: 'Ğ²ĞµÑ‡ĞµÑ€Ğ¾Ğ¼'
//       },
//       night: {
//         phenomena: 'ĞĞ±Ğ»Ğ°Ñ‡Ğ½Ğ¾ Ñ Ğ¿Ñ€Ğ¾ÑÑĞ½ĞµĞ½Ğ¸ÑĞ¼Ğ¸, ÑƒĞ¼ĞµÑ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾Ğ¶Ğ´ÑŒ',
//         falloutIcon: 'D9',
//         temperature: '+9',
//         rusDateTime: 'Ğ½Ğ¾Ñ‡ÑŒÑ'
//       }
//     },
//     city: 'ĞœĞ¸Ğ½ÑĞºĞµ'
//   }


const request = require('request');
const bot = require('./bot');
let id;
bot.on('message', async (msg) => {
    const text = msg.text;
    id = msg.chat.id
})

function getWeather() {
    let options = {
        url: "https://www.onliner.by/sdapi/pogoda/api/forecast",
    };

    let a = request.get(options, function (err, res, body) {
        let data = JSON.parse(body)
        let nowTemp = data.now.temperature
        let nowWeather = data.now.phenomena
        let date = data.today.date
        let dayTemp = data.today.day.temperature
        let dayWeather = data.today.day.phenomena
        let evTemp = data.today.evening.temperature
        let evWeather = data.today.evening.phenomena
        
        bot.sendMessage(id,
            `ğŸš€ Ğ”Ğ¾Ğ±Ñ€Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾! ğŸš€
         Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ ${date}, Ğ¿Ñ€ÑĞ¼Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ ${nowTemp}, ${nowWeather}. ğŸ§
         ğŸŒ Ğ”Ğ½ĞµĞ¼ ${dayTemp}, ${dayWeather}. 
         ğŸŒ“ Ğ’ĞµÑ‡ĞµÑ€Ğ¾Ğ¼ ${evTemp}, ${evWeather}.`)
    }
    )
}

module.exports = getWeather;